[2026-02-06T22:45:48] OpenAI Codex v0.0.0 (research preview)
[2026-02-06T22:45:48] binary: C:\Users\Victoria\AppData\Local\just-every\code\0.6.59\code-x86_64-pc-windows-msvc.exe
--------
workdir: C:\Users\Victoria\Documents\GitHub\INOX-VAL
model: gpt-5.2-codex
provider: openai
approval: never
sandbox: read-only
reasoning effort: medium
reasoning summaries: auto
--------
[2026-02-06T22:45:48] User instructions:
Context: Focus on backend/services/firebase and scripts; read-only.

Agent: Inspect Firebase services, config, and data seeding scripts to determine what is needed to run locally (emulators, env vars, firestore rules). Identify gaps for a functional system.

Desired output: Checklist of firebase/local backend readiness + missing setup.

Files to consider: src/services/firebase, scripts, firebase.json, firestore.rules, .firebaserc, .env

[Running in read-only mode - no modifications allowed]

[2026-02-06T22:45:52] thinking

**Inspecting files for read-only analysis**
[2026-02-06T22:45:52] exec rg -n --files in C:\Users\Victoria\Documents\GitHub\INOX-VAL
[2026-02-06T22:45:52] rg -n --files exited -1 in 1ms:
ERROR
program not found
[2026-02-06T22:45:53] tokens used: 6.349

[2026-02-06T22:45:55] thinking

**Considering alternative directory listing commands**
[2026-02-06T22:45:55] exec powershell.exe -Command 'Get-ChildItem -Force -Name' in C:\Users\Victoria\Documents\GitHub\INOX-VAL
[2026-02-06T22:45:57] powershell.exe -Command 'Get-ChildItem -Force -Name' succeeded in 2s:
.claude
.code
.git
docs
guidelines
model
node_modules
public
scripts
src
.env
.firebaserc
.gitattributes
.gitignore
firebase.json
firestore.indexes.json
firestore.rules
index.html
LISTA DE MATERIAL.sldmat
package-lock.json
[2026-02-06T22:45:57] tokens used: 6.669

[2026-02-06T22:46:00] thinking

**Listing Firebase service files**

I'm inspecting the Firebase services and related scripts using directory listing commands to identify relevant files for review.
[2026-02-06T22:46:00] exec powershell.exe -Command "Get-ChildItem -Force -Name src\\services" in C:\Users\Victoria\Documents\GitHub\INOX-VAL
[2026-02-06T22:46:00] powershell.exe -Command "Get-ChildItem -Force -Name src\\services" succeeded in 580ms:
auth
firebase
firestore
http
storage
[2026-02-06T22:46:00] tokens used: 13.350

[2026-02-06T22:46:04] thinking

**Listing firebase directory**
[2026-02-06T22:46:04] exec powershell.exe -Command "Get-ChildItem -Force -Name src\\services\\firebase" in C:\Users\Victoria\Documents\GitHub\INOX-VAL
[2026-02-06T22:46:04] powershell.exe -Command "Get-ChildItem -Force -Name src\\services\\firebase" succeeded in 617ms:
anuncios.service.ts
base.service.ts
chat.service.ts
clientes.service.ts
estoque.service.ts
INTEGRATION_EXAMPLE.tsx
orcamentos.service.ts
ordens.service.ts
producao.service.ts
produtos.service.ts
README.md
[2026-02-06T22:46:04] tokens used: 13.610

[2026-02-06T22:46:08] thinking

**Inspecting README content**
[2026-02-06T22:46:08] exec powershell.exe -Command "Get-Content -Path src\\services\\firebase\\README.md" in C:\Users\Victoria\Documents\GitHub\INOX-VAL
[2026-02-06T22:46:09] powershell.exe -Command "Get-Content -Path src\\services\\firebase\\README.md" succeeded in 1s:
# ÐY"Ý Firebase Services - Guia de Uso

Este diretÇürio contÇ¸m todos os services para interaÇõÇœo com o Firebase Firestore do ERP Industrial.

---

## ÐY"? Estrutura

```
src/services/firebase/
ƒ"oƒ"?ƒ"? base.service.ts          # Service genÇ¸rico com CRUD base
ƒ"oƒ"?ƒ"? orcamentos.service.ts    # GestÇœo de orÇõamentos
ƒ"oƒ"?ƒ"? clientes.service.ts      # GestÇœo de clientes
ƒ"oƒ"?ƒ"? ordens.service.ts        # GestÇœo de ordens de produÇõÇœo
ƒ""ƒ"?ƒ"? README.md               # Este arquivo
```

---

## ÐYs? Como Usar
[2026-02-06T22:46:09] tokens used: 13.905

[2026-02-06T22:46:13] thinking

**Checking base service for emulator config**
[2026-02-06T22:46:13] exec powershell.exe -Command "Get-Content -Path src\\services\\firebase\\base.service.ts" in C:\Users\Victoria\Documents\GitHub\INOX-VAL
[2026-02-06T22:46:13] powershell.exe -Command "Get-Content -Path src\\services\\firebase\\base.service.ts" succeeded in 800ms:
/**
 * ============================================================================
 * BASE FIRESTORE SERVICE
 * ============================================================================
 * 
 * Service genÇ¸rico para operaÇõÇæes CRUD no Firestore com suporte a:
 * - Multi-tenant (isolamento por empresaId)
 * - Timestamps automÇ­ticos (createdAt, updatedAt)
 * - PaginaÇõÇœo
 * - Filtros complexos
 * - ValidaÇõÇæes
 * 
 * Todos os services especÇðficos devem estender esta classe.
 * ============================================================================
 */

import {
  collection,
  doc,
  getDoc,
[2026-02-06T22:46:13] tokens used: 17.849

[2026-02-06T22:46:16] thinking

**Considering Firebase initialization location**
[2026-02-06T22:46:16] exec powershell.exe -Command "Get-ChildItem -Force -Name src\\lib" in C:\Users\Victoria\Documents\GitHub\INOX-VAL
[2026-02-06T22:46:17] powershell.exe -Command "Get-ChildItem -Force -Name src\\lib" succeeded in 821ms:
firebase.ts
utils.ts
[2026-02-06T22:46:17] tokens used: 25.145
[2026-02-06T22:46:20] exec powershell.exe -Command "Get-Content -Path src\\lib\\firebase.ts" in C:\Users\Victoria\Documents\GitHub\INOX-VAL
[2026-02-06T22:46:21] powershell.exe -Command "Get-Content -Path src\\lib\\firebase.ts" succeeded in 1s:
/**
 * ============================================================================
 * CONFIGURAÇÎÇŸO FIREBASE
 * ============================================================================
 * 
 * Arquivo central de configuraÇõÇœo do Firebase para o ERP Industrial.
 * 
 * SETUP:
 * 1. Criar projeto no Firebase Console (https://console.firebase.google.com)
 * 2. Ativar Authentication (Email/Senha)
 * 3. Ativar Firestore Database
 * 4. Copiar as credenciais para o arquivo .env
 * 5. Configurar Firestore Security Rules (ver FIREBASE_SETUP.md)
 * 
 * VARIÇ?VEIS DE AMBIENTE NECESSÇ?RIAS (.env):
 * - VITE_FIREBASE_API_KEY
 * - VITE_FIREBASE_AUTH_DOMAIN
 * - VITE_FIREBASE_PROJECT_ID
 * - VITE_FIREBASE_STORAGE_BUCKET
 * - VITE_FIREBASE_MESSAGING_SENDER_ID
[2026-02-06T22:46:21] tokens used: 25.360

[2026-02-06T22:46:25] thinking

**Inspecting Firebase config and auth services**

I'm focusing on locating firebase-related config files and scripts like firebase.json, firestore.rules, .firebaserc, .env, and checking src/services/auth for relevant Firebase auth service code.
[2026-02-06T22:46:25] exec powershell.exe -Command 'Get-Content -Path firebase.json' in C:\Users\Victoria\Documents\GitHub\INOX-VAL
[2026-02-06T22:46:26] powershell.exe -Command 'Get-Content -Path firebase.json' succeeded in 727ms:
{
  "firestore": {
    "rules": "firestore.rules",
    "indexes": "firestore.indexes.json"
  }
}
[2026-02-06T22:46:26] tokens used: 28.146
[2026-02-06T22:46:30] exec powershell.exe -Command 'Get-Content -Path firestore.rules' in C:\Users\Victoria\Documents\GitHub\INOX-VAL
[2026-02-06T22:46:33] powershell.exe -Command 'Get-Content -Path firestore.rules' succeeded in 2s:
rules_version = '2';

/**
 * ============================================================================
 * FIRESTORE SECURITY RULES - ERP INDUSTRIAL
 * ============================================================================
 * 
 * Regras de seguranÇõa multi-tenant:
 * - UsuÇ­rio sÇü acessa dados da prÇüpria empresa (empresaId)
 * - ValidaÇõÇœo de campos obrigatÇürios
 * - ValidaÇõÇœo de tipos de dados
 * - ProteÇõÇœo contra modificaÇõÇœo de campos sensÇðveis
 * 
 * DEPLOY:
 * firebase deploy --only firestore:rules
 * 
 * ============================================================================
 */

service cloud.firestore {
[2026-02-06T22:46:33] tokens used: 29.001

[2026-02-06T22:46:38] thinking

**Identifying required Firebase config files**

I found that the project needs a `.firebaserc` and possibly a `.env` file, likely with placeholder values. Next, I'll check for existing examples or templates of these files.
[2026-02-06T22:46:38] exec powershell.exe -Command 'Get-Content -Path .firebaserc' in C:\Users\Victoria\Documents\GitHub\INOX-VAL
[2026-02-06T22:46:39] powershell.exe -Command 'Get-Content -Path .firebaserc' succeeded in 1s:
{
  "projects": {
    "default": "erp-industrial-inox"
  }
}
[2026-02-06T22:46:39] tokens used: 36.674

[2026-02-06T22:46:43] thinking

**Checking .env authenticity**
[2026-02-06T22:46:43] exec powershell.exe -Command 'Get-Content -Path .env' in C:\Users\Victoria\Documents\GitHub\INOX-VAL
[2026-02-06T22:46:45] powershell.exe -Command 'Get-Content -Path .env' succeeded in 1s:
# Firebase Configuration
VITE_FIREBASE_API_KEY=AIzaSyCY2nBQn50KnGx44PTvIKMCEyeQtldwdwA
VITE_FIREBASE_AUTH_DOMAIN=erp-industrial-inox.firebaseapp.com
VITE_FIREBASE_PROJECT_ID=erp-industrial-inox
VITE_FIREBASE_STORAGE_BUCKET=erp-industrial-inox.firebasestorage.app
VITE_FIREBASE_MESSAGING_SENDER_ID=398874377867
VITE_FIREBASE_APP_ID=1:398874377867:web:55c982a51293615fcfde8e

# Optional: Emulators (development)
VITE_USE_FIREBASE_EMULATORS=false
VITE_USE_MOCK=false
VITE_FIREBASE_ENABLE_PERSISTENCE=true

# Seed (users)
SEED_ADMIN_PASSWORD=InoxVal!
SEED_EMPRESA_ID=tenant-demo-001
[2026-02-06T22:46:45] tokens used: 36.913

[2026-02-06T22:46:48] thinking

**Listing available scripts**
[2026-02-06T22:46:48] exec powershell.exe -Command 'Get-ChildItem -Force -Name scripts' in C:\Users\Victoria\Documents\GitHub\INOX-VAL
[2026-02-06T22:46:49] powershell.exe -Command 'Get-ChildItem -Force -Name scripts' succeeded in 1s:
addAdminAuthUser.ts
addAdminUser.ts
addClientAdmin.ts
populate-firestore.js
seed-sector-users.js
seed.ts
test-firebase.js
[2026-02-06T22:46:49] tokens used: 37.831

[2026-02-06T22:46:53] thinking

**Planning local inspection using Get-Content**
[2026-02-06T22:46:53] exec powershell.exe -Command "Get-Content -Path scripts\\seed.ts" in C:\Users\Victoria\Documents\GitHub\INOX-VAL
[2026-02-06T22:46:54] powershell.exe -Command "Get-Content -Path scripts\\seed.ts" succeeded in 1s:
import { initializeApp, applicationDefault } from 'firebase-admin/app';
import { getAuth } from 'firebase-admin/auth';
import { FieldValue, getFirestore } from 'firebase-admin/firestore';

const app = initializeApp({ credential: applicationDefault() });
const auth = getAuth(app);
const db = getFirestore(app);

const rolesPermissions = {
  Administrador: {
    dashboard: { view: true, create: false, edit: false, delete: false },
    clientes: { view: true, create: true, edit: true, delete: true },
    produtos: { view: true, create: true, edit: true, delete: true },
    catalogo: { view: true, create: true, edit: true, delete: true },
    estoque: { view: true, create: true, edit: true, delete: true },
    orcamentos: { view: true, create: true, edit: true, delete: true },
    ordens: { view: true, create: true, edit: true, delete: true },
    compras: { view: true, create: true, edit: true, delete: true },
    producao: { view: true, create: true, edit: true, delete: true },
    calculadora: { view: true, create: true, edit: true, delete: true },
[2026-02-06T22:46:54] tokens used: 38.118

[2026-02-06T22:46:57] thinking

**Checking admin user scripts**
[2026-02-06T22:46:57] exec powershell.exe -Command "Get-Content -Path scripts\\addAdminAuthUser.ts" in C:\Users\Victoria\Documents\GitHub\INOX-VAL
[2026-02-06T22:46:58] powershell.exe -Command "Get-Content -Path scripts\\addAdminAuthUser.ts" succeeded in 839ms:
import admin from 'firebase-admin';
import { readFile } from 'fs/promises';

const serviceAccountRaw = await readFile('./.secrets/serviceAccountKey.json', 'utf8');
const serviceAccount = JSON.parse(serviceAccountRaw);

if (!admin.apps.length) {
  admin.initializeApp({
    credential: admin.credential.cert(serviceAccount),
    databaseURL: 'https://erp-industrial-inox.firebaseio.com',
  });
}

async function createAdminAuthUser() {
  try {
    const userRecord = await admin.auth().createUser({
      email: 'admin@empresa.com',
      password: 'admin123', // Defina a senha desejada
      displayName: 'Admin',
    });
[2026-02-06T22:46:58] tokens used: 42.053

[2026-02-06T22:47:03] thinking

**Reviewing addAdminUser script**
[2026-02-06T22:47:03] exec powershell.exe -Command "Get-Content -Path scripts\\addAdminUser.ts" in C:\Users\Victoria\Documents\GitHub\INOX-VAL
[2026-02-06T22:47:05] powershell.exe -Command "Get-Content -Path scripts\\addAdminUser.ts" succeeded in 1s:
import admin from 'firebase-admin';
import { readFile } from 'fs/promises';

const serviceAccountRaw = await readFile('./.secrets/serviceAccountKey.json', 'utf8');
const serviceAccount = JSON.parse(serviceAccountRaw);

if (!admin.apps.length) {
  admin.initializeApp({
    credential: admin.credential.cert(serviceAccount),
    databaseURL: 'https://erp-industrial-inox.firebaseio.com',
  });
}

const db = admin.firestore();

async function addAdminUser() {
  const empresaId = 'empresa-demo-001'; // Ajuste conforme necessÇ­rio
  const newUserData = {
    nome: 'Admin',
    email: 'admin@empresa.com',
[2026-02-06T22:47:05] tokens used: 43.211

[2026-02-06T22:47:09] thinking

**Reviewing Firebase setup scripts**

I'm examining addClientAdmin, populate-firestore.js, seed-sector-users.js, and test-firebase.js to understand how admin roles and user data are seeded and tested in Firebase, aiming to clarify the data seeding and role assignment approach.
[2026-02-06T22:47:09] exec powershell.exe -Command "Get-Content -Path scripts\\addClientAdmin.ts" in C:\Users\Victoria\Documents\GitHub\INOX-VAL
[2026-02-06T22:47:10] powershell.exe -Command "Get-Content -Path scripts\\addClientAdmin.ts" succeeded in 612ms:


import admin from 'firebase-admin';
import { readFile } from 'fs/promises';

const serviceAccountRaw = await readFile('./.secrets/serviceAccountKey.json', 'utf8');
const serviceAccount = JSON.parse(serviceAccountRaw);

if (!admin.apps.length) {
  admin.initializeApp({
    credential: admin.credential.cert(serviceAccount),
    databaseURL: 'https://erp-industrial-inox.firebaseio.com',
  });
}

const db = admin.firestore();

async function addSampleClientAdmin() {
  const empresaId = 'empresa-demo-001'; // Ajuste conforme sua empresa
  const newClientData = {
[2026-02-06T22:47:10] tokens used: 43.811
[2026-02-06T22:47:12] exec powershell.exe -Command "Get-Content -Path scripts\\populate-firestore.js" in C:\Users\Victoria\Documents\GitHub\INOX-VAL
[2026-02-06T22:47:14] powershell.exe -Command "Get-Content -Path scripts\\populate-firestore.js" succeeded in 2s:
/**
 * ============================================================================
 * SCRIPT: POPULAR BANCO DE DADOS FIRESTORE
 * ============================================================================
 * 
 * Este script cria automaticamente TODAS as coleÇõÇæes do Firestore
 * inserindo dados de exemplo em cada uma.
 * 
 * COMO USAR:
 * 1. Certifique-se que o .env estÇ­ configurado
 * 2. Execute: node scripts/populate-firestore.js
 * 3. Aguarde a criaÇõÇœo de todas as coleÇõÇæes
 * 
 * COLEÇÎÇES CRIADAS:
 * - empresas (1 empresa)
 * - usuarios + users (1 usuÇ­rio seed)
 * - clientes (3 clientes)
 * - materiais (5 materiais)
 * - estoque_materiais (5 itens)
 * - produtos (2 produtos)
[2026-02-06T22:47:14] tokens used: 44.883

[2026-02-06T22:47:19] thinking

**Reviewing seed data and Firebase tests**
[2026-02-06T22:47:19] exec powershell.exe -Command "Get-Content -Path scripts\\seed-sector-users.js" in C:\Users\Victoria\Documents\GitHub\INOX-VAL
[2026-02-06T22:47:20] powershell.exe -Command "Get-Content -Path scripts\\seed-sector-users.js" succeeded in 690ms:
/**
 * Seed: limpa usuÇ­rios (Auth + Firestore) e cria 1 usuÇ­rio por setor/role
 */

import admin from 'firebase-admin';
import { readFileSync } from 'fs';
import { initializeApp, cert } from 'firebase-admin/app';
import { getFirestore, FieldValue } from 'firebase-admin/firestore';

const envFile = new URL('../.env', import.meta.url);
const serviceAccountFile = new URL('../.secrets/serviceAccountKey.json', import.meta.url);

function parseEnvFile(filePath) {
  try {
    const raw = readFileSync(filePath, 'utf8');
    const lines = raw.split(/\r?\n/);
    const env = {};
    for (const line of lines) {
      if (!line || line.startsWith('#')) continue;
      const idx = line.indexOf('=');
[2026-02-06T22:47:20] tokens used: 55.248
[2026-02-06T22:47:26] exec powershell.exe -Command "Get-Content -Path scripts\\test-firebase.js" in C:\Users\Victoria\Documents\GitHub\INOX-VAL
[2026-02-06T22:47:26] powershell.exe -Command "Get-Content -Path scripts\\test-firebase.js" succeeded in 514ms:
/**
 * SCRIPT DE TESTE FIREBASE
 * Verifica se Firebase estÇ­ configurado corretamente
 *
 * COMO USAR:
 * node scripts/test-firebase.js
 */

import { initializeApp } from 'firebase/app';
import { getAuth } from 'firebase/auth';
import { getFirestore } from 'firebase/firestore';

const firebaseConfig = {
  apiKey: "AIzaSyCY2nBQn50KnGx44PTvIKMCEyeQtldwdwA",
  authDomain: "erp-industrial-inox.firebaseapp.com",
  projectId: "erp-industrial-inox",
  storageBucket: "erp-industrial-inox.firebasestorage.app",
  messagingSenderId: "398874377867",
  appId: "1:398874377867:web:55c982a51293615fcfde8e"
};
[2026-02-06T22:47:26] tokens used: 57.622

[2026-02-06T22:47:48] thinking

**Summarizing Firebase local setup gaps**

I've identified that local Firebase setup requires running emulators (Firestore, Auth) with proper env vars like VITE_USE_FIREBASE_EMULATORS, plus serviceAccountKey.json for admin use. The firebase.json lacks emulator config, so emulators run on defaults, which is a gap. Local startup needs firebase-tools and firebase emulators start, as well as setting empresaId via auth context to avoid errors. Credentials are present in .env, but instructions for emulators and seeding are missing or incomplete.
**Detailing local Firebase emulator gaps and script issues**

The .env has VITE_USE_FIREBASE_EMULATORS defaulted false but needs setting true for local emulators. firebase.json lacks emulator config for Firestore and Auth, so users must rely on defaults without UI integration. Admin scripts require a missing serviceAccountKey.json in .secrets and don’t support emulator hosts, so running locally with emulators is unsupported in scripts. Firestore rules depend on seeded users and permissions collections created by seed scripts, essential for local auth to pass rules and empresaId context. Storage emulator isn’t configured or connected in firebase code, so local storage calls go to production, representing another gap. References include .env, firebase.json, seed scripts, firestore.rules, admin scripts, and src/services/firebase.

[2026-02-06T22:47:48] exec powershell.exe -Command "Get-Content -Path src\\services\\storage\\index.ts" in C:\Users\Victoria\Documents\GitHub\INOX-VAL
[2026-02-06T22:47:48] powershell.exe -Command "Get-Content -Path src\\services\\storage\\index.ts" exited 1 in 707ms:
ERROR
Get-Content : NÆo ‚ poss¡vel localizar o caminho 
'C:\Users\Victoria\Documents\GitHub\INOX-VAL\src\services\storage\index.ts' porque ele nÆo existe.
No linha:1 caractere:1
+ Get-Content -Path src\services\storage\index.ts
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : ObjectNotFound: (C:\Users\Victor...torage\index.ts:String) [Get-Content], ItemNotFoundEx 
   ception
    + FullyQualifiedErrorId : PathNotFound,Microsoft.PowerShell.Commands.GetContentCommand
 
[2026-02-06T22:47:48] tokens used: 59.654

[2026-02-06T22:47:53] thinking

**Identifying need for storage folder**
[2026-02-06T22:47:53] exec powershell.exe -Command "Get-ChildItem -Force -Name src\\services\\storage" in C:\Users\Victoria\Documents\GitHub\INOX-VAL
[2026-02-06T22:47:54] powershell.exe -Command "Get-ChildItem -Force -Name src\\services\\storage" succeeded in 1s:
db.ts
seed.ts
[2026-02-06T22:47:54] tokens used: 60.904

[2026-02-06T22:47:59] thinking

**Inspecting database connection setup**
[2026-02-06T22:47:59] exec powershell.exe -Command "Get-Content -Path src\\services\\storage\\db.ts" in C:\Users\Victoria\Documents\GitHub\INOX-VAL
[2026-02-06T22:47:59] powershell.exe -Command "Get-Content -Path src\\services\\storage\\db.ts" succeeded in 617ms:
/**
 * Camada de persistÇ¦ncia local com IndexedDB
 * AbstraÇõÇœo que permite trocar para backend futuramente
 */

import { openDB, DBSchema, IDBPDatabase } from 'idb';
import type { ID } from '@/shared/types/ids';

// VersÇœo atual do banco de dados
const DB_VERSION = 4; // Incrementado para incluir calculadora
const DB_NAME = 'erp_database';

/**
 * Schema do banco de dados
 */
interface ERPDatabase extends DBSchema {
  usuarios: {
    key: ID;
    value: any;
    indexes: { 'by-email': string; 'by-role': string; 'by-status': string };
[2026-02-06T22:47:59] tokens used: 61.229

[2026-02-06T22:48:17] thinking

**Summarizing Firebase local setup and gaps**

I've confirmed the app uses local IndexedDB storage, not Firebase storage, and that seeding requires real Google credentials or gcloud login since emulator credentials aren’t configured. The firebase.ts file connects to auth and Firestore emulators using environment flags, but firebase.json lacks emulator config and CLI instructions. Also, Firestore security rules don't appear to allow test accounts without proper seeding, which is missing, potentially blocking access locally. The seed script uses admin privileges but local emulator seeding isn’t fully documented. A test script uses hardcoded production config instead of emulator, another potential gap. I'll produce a clear checklist and gaps list referencing key files next.
[2026-02-06T22:48:17] codex

**Checklist**
- Firebase web config present via `.env` with `VITE_FIREBASE_*` and emulator toggle `VITE_USE_FIREBASE_EMULATORS` in `.env`.
- Firebase init supports Auth + Firestore emulators when `VITE_USE_FIREBASE_EMULATORS=true` in `src/lib/firebase.ts`.
- Firestore rules and indexes are wired in `firebase.json` with rules in `firestore.rules`.
- Default Firebase project is declared in `.firebaserc`.
- Data seeding scripts exist for Auth/Firestore roles/users/collections in `scripts/seed.ts`, `scripts/seed-sector-users.js`, and `scripts/populate-firestore.js`.
- Multi-tenant enforcement is in app services via `empresaId` from auth/context in `src/services/firebase/base.service.ts`.
- Firestore rules enforce permissions and tenant checks; they expect `users`/`usuarios` and `permissoes_roles` to exist in `firestore.rules`.

**Gaps**
- Emulators aren’t configured in `firebase.json` (no `emulators` block). You must rely on default ports `9099`/`8080` or add config later; otherwise `firebase emulators:start` won’t reflect intended settings in `src/lib/firebase.ts`.
- Admin seed scripts require a service account file at `.secrets/serviceAccountKey.json` or application default credentials. This file is not in the repo and is mandatory for `scripts/addAdminAuthUser.ts`, `scripts/addAdminUser.ts`, `scripts/addClientAdmin.ts`, `scripts/seed-sector-users.js`, `scripts/populate-firestore.js`.
- `scripts/seed.ts` uses `applicationDefault()` and won’t work locally unless `GOOGLE_APPLICATION_CREDENTIALS` is set or gcloud ADC is configured.
- Rules require a user doc in `users`/`usuarios` plus `permissoes_roles` before app access works. Without running a seed, all reads/writes will be denied by `firestore.rules`.
- `scripts/test-firebase.js` hardcodes production config and does not use emulators, so it can’t validate local emulators.
- If you want local-only testing, `VITE_USE_FIREBASE_EMULATORS` must be set to `true` in `.env`, and emulators must be running; otherwise the app connects to the live project configured in `.env`.

If you want, I can map which seed script best matches your desired local workflow, or verify which collections your UI actually depends on.
[2026-02-06T22:48:17] tokens used: 65.856
